!function e(t,r,n){function o(i,s){if(!r[i]){if(!t[i]){var u="function"==typeof require&&require;if(!s&&u)return u(i,!0);if(a)return a(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[i]={exports:{}};t[i][0].call(c.exports,function(e){var r=t[i][1][e];return o(r?r:e)},c,c.exports,e,t,r,n)}return r[i].exports}for(var a="function"==typeof require&&require,i=0;i<n.length;i++)o(n[i]);return o}({1:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(r,"__esModule",{value:!0});r.ColorPlane=function(e){function t(){var e;n(this,t);for(var r=arguments.length,a=Array(r),i=0;r>i;i++)a[i]=arguments[i];var s=o(this,(e=Object.getPrototypeOf(t)).call.apply(e,[this].concat(a)));s.bufferCount=s.getAttribute("position").count;for(var u=new Float32Array(3*s.bufferCount),l=0,c=u.length;c>l;++l)u[l]=1;return s.addAttribute("color",new THREE.BufferAttribute(u,3)),s}return a(t,e),i(t,[{key:"setColor",value:function(e){for(var t=this.getAttribute("color"),r=0;r<this.bufferCount;++r)this.setColorAttribute(t,r,e);t.needsUpdate=!0}},{key:"setVertexColor",value:function(e,t){var r=this.getAttribute("color");this.setColorAttribute(r,e,t),r.needsUpdate=!0}},{key:"setColorAttribute",value:function(e,t,r){e.setXYZ(t,r.r,r.g,r.b)}}]),t}(THREE.PlaneBufferGeometry)},{}],2:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(r,"__esModule",{value:!0});var a=r.MaterialManager=function(){function e(){n(this,e)}return o(e,null,[{key:"addTexture",value:function(t){t.tilesHorizontal=t.tilesHorizontal||1,t.tilesVerticle=t.tilesVerticle||1;var r=1/t.tilesHorizontal,n=1/t.tilesVerticle;e.cache[t.key]=[];for(var o=0;o<t.tilesVerticle;++o)for(var a=0;a<t.tilesHorizontal;++a){var i=o*t.tilesHorizontal+a,s=a/t.tilesHorizontal,u=o/t.tilesVerticle,l=THREE.MeshBasicMaterial,c={textureMap:e.textureLoader.load(t.texture)},f={map:c.textureMap,transparent:!0,alphaTest:.01,color:t.color||4294967295,vertexColors:THREE.VertexColors};t.normal&&(l=THREE.MeshPhongMaterial,c.normalMap=e.textureLoader.load(t.normal),f.specular=t.specular||null,f.shininess=t.shininess||null,f.normalMap=c.normalMap);var p=new l(f);for(var h in c){var d=c[h];d.wrapS=d.wrapT=e.textureWrapMode,d.repeat.set(r,n),d.offset.set(s,u)}e.cache[t.key][i]=p}}},{key:"getMaterial",value:function(t,r){return e.cache[t][r]}}]),e}();a.cache={},a.textureWrapMode=THREE.RepeatWrapping,a.textureLoader=new THREE.TextureLoader},{}],3:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(r,"__esModule",{value:!0}),r.Ship=void 0;var s=e("./sprite.js");r.Ship=function(e){function t(e){n(this,t),e=e||{};var r=o(this,Object.getPrototypeOf(t).call(this));return r.position.set(THREE.Math.randFloat(-2,2),THREE.Math.randFloat(-2,2),THREE.Math.randFloat(2,4)),r.rotation.z=THREE.Math.randFloat(0,2*Math.PI),r.userData={sprite:e.sprite||new s.Sprite("ship",THREE.Math.randInt(11,15)),speed:e.speed||THREE.Math.randFloat(.008,.01)},r.add(r.userData.sprite),r}return a(t,e),i(t,[{key:"update",value:function(){var e=new THREE.Vector3(-Math.sin(this.rotation.z),Math.cos(this.rotation.z),0);e.multiplyScalar(this.userData.speed),this.position.add(e),(this.position.x>=20||this.position.x<=-20)&&(this.position.x=-this.position.x),(this.position.y>=20||this.position.y<=-20)&&(this.position.y=-this.position.y)}}]),t}(THREE.Object3D)},{"./sprite.js":5}],4:[function(e,t,r){"use strict";function n(){return THREE.Math.randFloat(0,2*Math.PI)}function o(){requestAnimationFrame(o),g.rotation.z+=.001,g.children.forEach(function(e){e.rotation.z+=e.userData.rotationSpeed}),j.forEach(function(e){e.update()}),E.render(v,y)}function a(e,t,r){var n=e.index+1;n>r&&(n=t),e.setIndex(n)}function i(){y.aspect=window.innerWidth/window.innerHeight,y.updateProjectionMatrix(),E.setSize(window.innerWidth,window.innerHeight)}function s(e){var t=e.deltaY>0?1:-1;y.position.z+=t}function u(e){e.preventDefault()}var l=e("./sprite.js"),c=e("./materialManager.js"),f=e("./ship.js"),p=document.getElementById("game"),h=window.innerWidth,d=window.innerHeight,v=new THREE.Scene,y=new THREE.PerspectiveCamera(90,h/d,.1,1e3);y.position.z=8;var E=new THREE.WebGLRenderer,b=E.domElement;E.setSize(h,d),p.appendChild(b),c.MaterialManager.addTexture({key:"ship",texture:"/images/ships.png",tilesHorizontal:4,tilesVerticle:4}),c.MaterialManager.addTexture({key:"space-station",texture:"/images/space-station.png",normal:"/images/space-station-normal.png",tilesHorizontal:2,tilesVerticle:2,specular:1431655765,shininess:40});var w=new THREE.DirectionalLight(12320767,.4);w.position.set(1,1,2),v.add(w);var g=new THREE.Object3D;v.add(g);for(var M=0;4>M;++M){var m=new l.Sprite("space-station",THREE.Math.randInt(1,3)),T=THREE.Math.randFloat(2,3);m.position.set(THREE.Math.randFloat(-4,4),THREE.Math.randFloat(-4,4),THREE.Math.randFloat(2,4)),m.scale.set(T,T,1),m.rotation.z=n(),m.userData={rotationSpeed:THREE.Math.randFloat(-.004,-.01)},g.add(m)}g.children[0].position.set(0,0,5);for(var j=[],M=0;150>M;++M){var O=new f.Ship;v.add(O),j.push(O)}p.addEventListener("wheel",s,!1),p.addEventListener("mousedown",u,!1),window.addEventListener("resize",i,!1),g.children.forEach(function(e){window.setInterval(a,2e3,e,1,3)}),o()},{"./materialManager.js":2,"./ship.js":3,"./sprite.js":5}],5:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function c(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:c(o,t,r)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(r)};Object.defineProperty(r,"__esModule",{value:!0}),r.Sprite=void 0;var u=e("./materialManager.js"),l=e("./colorPlane.js");r.Sprite=function(e){function t(e){var r=arguments.length<=1||void 0===arguments[1]?0:arguments[1];n(this,t);var a=o(this,Object.getPrototypeOf(t).call(this,new l.ColorPlane(1,1),u.MaterialManager.getMaterial(e,r)));return a.texture=e,a.index=r,a}return a(t,e),i(t,[{key:"setIndex",value:function(e){return e!==this.index&&(this.material=u.MaterialManager.getMaterial(this.texture,e),this.index=e),this}},{key:"clone",value:function(e){var r;void 0===e&&(e=new t(this.texture,this.index));for(var n=arguments.length,o=Array(n>1?n-1:0),a=1;n>a;a++)o[a-1]=arguments[a];return(r=s(Object.getPrototypeOf(t.prototype),"clone",this)).call.apply(r,[this,e].concat(o))}}]),t}(THREE.Mesh)},{"./colorPlane.js":1,"./materialManager.js":2}]},{},[4]);